---
layout: post
title: '悦读笔记-待整理'
date: 2020-08-25
author: 李大鹏
cover: ''
tags: iOS
---

### 一、《iOS 高手课》

### 二、其他

- `@synchronized` 和 `@dispatch_once`

  - synchronized，objc_sync_enter 对方法添加递归互斥锁，执行线程安全代码，objc_sync_exit 时解锁。
  - dispatch_once 首次调用执行 block 时设置 predicate 为 DISPATCH_ONCE_DONE(~0l)，其他线程调用会等待，加入到信号量链表中，执行完之后唤醒。
  - dispatch_once 单例效率更高。内部原子操作来替代锁、通过信号量实现线程同步、针对处理器优化、if 判断语句上也做了优化。

### 三、算法常用函数

```
// ------- 数组 --------
// 初始值
var f = [Int](repeating: Int.min, count: n + 1)
// 删除所有元素
f.removeAll()
// 变形
let numbers = [1,2,3,4]
let result = numbers.map { $0 + 2 }
// 排序
intervals.sort { $0[0] < $1[0] }
// 遍历
for idx in arr.indices { }
for idx in 0...max { }
// 步进
for i in stride(from: 0, to: 10 ,by: 2) {}
// 最大值，最小值
Int.max Int.min

// 集合
var colors:Set = ["red", "green", "blue" , "white"]
let isContainBlue = colors.contains("blue")

// 枚举
enum Direction {
  case right
  case down
}
switch direction {
  case .right:
      print(1)
  case .down:
      print(1)
}

// 次方
// 结果为a的b次方
pow(a , b)
Int(truncating: pow(10, bitNum-1) as NSDecimalNumber)

extension String {
    subscript (i: Int) -> Character {
        return self[index(startIndex, offsetBy: i)]
    }
}
```
