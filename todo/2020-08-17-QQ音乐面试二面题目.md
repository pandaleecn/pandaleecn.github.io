---
layout: post
title: 'QQ音乐面试二面题目'
date: 2020-08-17
author: 李大鹏
cover: ''
tags: iOS
---

```
// 函数去抖，https://zhuanlan.zhihu.com/p/45721166
Implement a coalesced event handler which is driven by a model that is updated frequenty.

@interface CEHandler: CEObject {
}

- (void)needUpdate; //this will be called when the data model has updates
- (void)redraw; //call this method to redraw the data on screen

@end

@interface CEHandler()
@property (nonatomic, strong) CADisplayLink *dLink;
@property (nonatomic, strong) CFTimeInterval lastTimeStamp;

@end

@implementation CEHandler

- (void)needUpdate {

  // 注意添加防止循环引用代理
  self.dLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(needUpdate)];
  [self.dLink addToRunLoop:[NSRunLoop mainRunLoop] forMode:NSRunLoopCommonModes];

  if lastTimeStamp == 0 {
    lastTimeStamp = self.dLink.timestamp;
  } else {

    NSTimeInterval useTime = self.dLink.timestamp - lastTimeStamp;
    if (useTime < 1) return;

    [self redraw];
  }
}

- (void)redraw {

}


Please identify and correct any issues you see in the following C code.

BOOL isHalfTransparent(unsigned int color) {
  if (color&0xFF == 0x7F) { // 1. 取颜色后八位，最后一个字节； 2. 优先错误，先判断为false；计算结果一直为FALSE
    return TRUE;
  } else {
    return FALSE;
  }
}

```
