---
layout: post
title: 'QQ音乐面试前面经'
date: 2018-08-25
author: 李大鹏
cover: ''
tags: iOS
---

#### 面经 1：腾讯 QQ 音乐项目组-iOS-2020-06-19 11:47

##### 1、自我介绍；

##### 2、现在在做项目的难点是什么，一些细节延伸；

- 订单业务流。我们的项目设计的 Usecase 比较复杂，而且延伸比较长，选择钻石、款式、定制信息、客户信息等等，想要

##### 3、直播室聊天模块怎么设计，难点在哪里；

##### 4、怎么从 100 万条数据中选出排在前面的 100 条数据（topK 问题）；

- Hash 去重
- 小顶堆或分治
  - 小顶堆。取 100 条元素，构建小顶堆，顺序往后对比，遇到更大的数则替换堆顶，重新构建小顶堆。O((N-M)logM)，空间复杂度是 M，I/O 比较高；
  - 分治法。分 100 份 1 万的组，取前 100，排序后合并重拍。

##### 5、网络-dns，长连接，httpDNS；

- DNS 是网络域名解析服务，当我们对一个域名进行请求时，负责域名解析成 IP 地址。客户端发出请求后，DNS 首先请求本地 DNS 服务器，一般 80%几率能够命中并返回。如果本地 DNS 服务器没有缓存，则往根服务器请求，并逐级请求，命中后返回。使用解析后的 IP 地址进行后续请求。
- HttpDNS，防止 DNS 劫持，因为在域名请求过程中，由于运营商的问题或者黑客篡改 DNS 等风险的存在，导致解析到钓鱼的 DNS 上，存在安全隐患。我们在开发时，一般使用 IP 直连的方式，进行规避。使用 HttpDNS 时需要将域名放入 head 字段，post 时也需要将数据放入，在集成就项目时，可替换 URLProtocol，AFN 需要使用 Runtime 替换。
- 长连接，通过 Socket 实现，基于 asynSocket 框架对

##### 6、快排实现过程及复杂度，二叉树的遍历前序、后续遍历；

##### 8、聊下性能优化；

##### 9、如何保障 App 的数据安全；

##### 10、runLoop，和 runloop 的运用，实现细节；

##### 11、现在做过的项目哪个最难，对自己的成长帮助最大；

##### 12、多线程与线程同步锁。

#### 自我补充

##### 你的 app 架构是什么，有什么优缺点、为什么这么做、怎么改进
